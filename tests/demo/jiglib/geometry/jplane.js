(function(d){var h=d.Vector3DUtil;var e=d.JMatrix3D;var a=d.JNumber3D;var f=d.JConfig;var g=d.ISkin3D;var b=d.PhysicsState;var i=d.RigidBody;var c=function(j,k){this.Super(j);if(k==undefined){this._initNormal=[0,0,-1,0];this._normal=this._initNormal.slice(0);}else{this._initNormal=k.slice(0);this._normal=this._initNormal.slice(0);}this._distance=0;this._type="PLANE";this._movable=false;};d.extend(c,d.RigidBody);c.prototype._initNormal=null;c.prototype._normal=null;c.prototype._distance=null;c.prototype.get_normal=function(){return this._normal;};c.prototype.get_distance=function(){return this._distance;};c.prototype.pointPlaneDistance=function(j){return h.dotProduct(this._normal,j)-this._distance;};c.prototype.segmentIntersect=function(m,j,o){m.fracOut=0;m.posOut=[0,0,0,0];m.normalOut=[0,0,0,0];var l=0;var n;var k=h.dotProduct(this._normal,j.delta);if(Math.abs(k)>a.NUM_TINY){n=-1*(h.dotProduct(this._normal,j.origin)-this._distance)/k;if(n<0||n>1){return false;}else{l=n;m.fracOut=l;m.posOut=j.getPoint(l);m.normalOut=this._normal.slice(0);h.normalize(m.normalOut);return true;}}else{return false;}};c.prototype.updateState=function(){this.Super.prototype.updateState.call(this);this._normal=this._initNormal.slice(0);e.multiplyVector(this._currState._orientation,this._normal);this._distance=h.dotProduct(this._currState.position,this._normal);};d.JPlane=c;})(jigLib);