(function(e){var g=e.Vector3DUtil;var d=e.JMatrix3D;var f=e.JNumber3D;var c=e.ISkin3D;var b=e.PhysicsState;var h=e.RigidBody;var a=function(j,i){this.Super(j);this._type="SPHERE";this._radius=i;this._boundingSphere=this._radius;this.set_mass(1);this.updateBoundingBox();};e.extend(a,e.RigidBody);a.prototype.name=null;a.prototype._radius=null;a.prototype.set_radius=function(i){this._radius=i;this._boundingSphere=this._radius;this.setInertia(this.getInertiaProperties(this.get_mass()));this.setActive();this.updateBoundingBox();};a.prototype.get_radius=function(){return this._radius;};a.prototype.segmentIntersect=function(p,q,l){p.fracOut=0;p.posOut=[0,0,0,0];p.normalOut=[0,0,0,0];var m=0;var j=q.delta;var w=g.subtract(q.origin,l.position);var o=this._radius*this._radius;var x=g.get_lengthSquared(j);if(x<o){p.fracOut=0;p.posOut=q.origin.slice(0);p.normalOut=g.subtract(p.posOut,l.position);g.normalize(p.normalOut);return true;}var k=g.dotProduct(w,j);var n=g.get_lengthSquared(w);var t=k*k-x*(n-o);if(t<0){return false;}var v=Math.sqrt(t);var i=(-k-v)/x;var u=(-k+v)/x;if(i>1||u<0){return false;}m=Math.max(i,0);p.fracOut=m;p.posOut=q.getPoint(m);p.normalOut=g.subtract(p.posOut,l.position);g.normalize(p.normalOut);return true;};a.prototype.getInertiaProperties=function(i){var j=0.4*i*this._radius*this._radius;return d.getScaleMatrix(j,j,j);};a.prototype.updateBoundingBox=function(){this._boundingBox.clear();this._boundingBox.addSphere(this);};e.JSphere=a;})(jigLib);