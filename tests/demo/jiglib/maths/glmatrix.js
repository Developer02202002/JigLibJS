(function(a){glMatrixArrayType=typeof Float32Array!="undefined"?Float32Array:typeof WebGLFloatArray!="undefined"?WebGLFloatArray:Array;var d={};d.create=function(f){var e=new glMatrixArrayType(3);if(f){e[0]=f[0];e[1]=f[1];e[2]=f[2];}return e;};d.set=function(f,e){e[0]=f[0];e[1]=f[1];e[2]=f[2];return e;};d.add=function(f,e,g){if(!g||f==g){f[0]+=e[0];f[1]+=e[1];f[2]+=e[2];return f;}g[0]=f[0]+e[0];g[1]=f[1]+e[1];g[2]=f[2]+e[2];return g;};d.subtract=function(f,e,g){if(!g||f==g){f[0]-=e[0];f[1]-=e[1];f[2]-=e[2];return f;}g[0]=f[0]-e[0];g[1]=f[1]-e[1];g[2]=f[2]-e[2];return g;};d.negate=function(f,e){e||(e=f);e[0]=-f[0];e[1]=-f[1];e[2]=-f[2];return e;};d.scale=function(f,e,g){if(!g||f==g){f[0]*=e;f[1]*=e;f[2]*=e;return f;}g[0]=f[0]*e;g[1]=f[1]*e;g[2]=f[2]*e;return g;};d.normalize=function(h,f){f||(f=h);var l=h[0],k=h[1],j=h[2],i=Math.sqrt(l*l+k*k+j*j);if(i){if(i==1){f[0]=l;f[1]=k;f[2]=j;return f;}}else{f[0]=0;f[1]=0;f[2]=0;return f;}i=1/i;f[0]=l*i;f[1]=k*i;f[2]=j*i;return f;};d.cross=function(i,h,n){n||(n=i);var m=i[0],l=i[1];i=i[2];var j=h[0],k=h[1];h=h[2];n[0]=l*h-i*k;n[1]=i*j-m*h;n[2]=m*k-l*j;return n;};d.length=function(f){var e=f[0],g=f[1];f=f[2];return Math.sqrt(e*e+g*g+f*f);};d.dot=function(f,e){return f[0]*e[0]+f[1]*e[1]+f[2]*e[2];};d.direction=function(g,f,j){j||(j=g);var i=g[0]-f[0],h=g[1]-f[1];g=g[2]-f[2];f=Math.sqrt(i*i+h*h+g*g);if(!f){j[0]=0;j[1]=0;j[2]=0;return j;}f=1/f;j[0]=i*f;j[1]=h*f;j[2]=g*f;return j;};d.str=function(e){return"["+e[0]+", "+e[1]+", "+e[2]+"]";};var c={};c.create=function(f){var e=new glMatrixArrayType(9);if(f){e[0]=f[0];e[1]=f[1];e[2]=f[2];e[3]=f[3];e[4]=f[4];e[5]=f[5];e[6]=f[6];e[7]=f[7];e[8]=f[8];e[9]=f[9];}return e;};c.set=function(f,e){e[0]=f[0];e[1]=f[1];e[2]=f[2];e[3]=f[3];e[4]=f[4];e[5]=f[5];e[6]=f[6];e[7]=f[7];e[8]=f[8];return e;};c.identity=function(e){e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=1;e[5]=0;e[6]=0;e[7]=0;e[8]=1;return e;};c.toMat4=function(f,e){e||(e=b.create());e[0]=f[0];e[1]=f[1];e[2]=f[2];e[3]=0;e[4]=f[3];e[5]=f[4];e[6]=f[5];e[7]=0;e[8]=f[6];e[9]=f[7];e[10]=f[8];e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e;};c.str=function(e){return"["+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+"]";};var b={};b.create=function(f){var e=new glMatrixArrayType(16);if(f){e[0]=f[0];e[1]=f[1];e[2]=f[2];e[3]=f[3];e[4]=f[4];e[5]=f[5];e[6]=f[6];e[7]=f[7];e[8]=f[8];e[9]=f[9];e[10]=f[10];e[11]=f[11];e[12]=f[12];e[13]=f[13];e[14]=f[14];e[15]=f[15];}return e;};b.set=function(f,e){e[0]=f[0];e[1]=f[1];e[2]=f[2];e[3]=f[3];e[4]=f[4];e[5]=f[5];e[6]=f[6];e[7]=f[7];e[8]=f[8];e[9]=f[9];e[10]=f[10];e[11]=f[11];e[12]=f[12];e[13]=f[13];e[14]=f[14];e[15]=f[15];return e;};b.identity=function(e){e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e;};b.transpose=function(j,i){if(!i||j==i){var p=j[1],o=j[2],n=j[3],l=j[6],m=j[7],k=j[11];j[1]=j[4];j[2]=j[8];j[3]=j[12];j[4]=p;j[6]=j[9];j[7]=j[13];j[8]=o;j[9]=l;j[11]=j[14];j[12]=n;j[13]=m;j[14]=k;return j;}i[0]=j[0];i[1]=j[4];i[2]=j[8];i[3]=j[12];i[4]=j[1];i[5]=j[5];i[6]=j[9];i[7]=j[13];i[8]=j[2];i[9]=j[6];i[10]=j[10];i[11]=j[14];i[12]=j[3];i[13]=j[7];i[14]=j[11];i[15]=j[15];return i;};b.determinant=function(F){var E=F[0],D=F[1],C=F[2],B=F[3],z=F[4],A=F[5],y=F[6],x=F[7],w=F[8],v=F[9],u=F[10],r=F[11],t=F[12],s=F[13],q=F[14];F=F[15];return t*v*y*B-w*s*y*B-t*A*u*B+z*s*u*B+w*A*q*B-z*v*q*B-t*v*C*x+w*s*C*x+t*D*u*x-E*s*u*x-w*D*q*x+E*v*q*x+t*A*C*r-z*s*C*r-t*D*y*r+E*s*y*r+z*D*q*r-E*A*q*r-w*A*C*F+z*v*C*F+w*D*y*F-E*v*y*F-z*D*u*F+E*A*u*F;};b.inverse=function(aj,ai){ai||(ai=aj);var ah=aj[0],ag=aj[1],af=aj[2],ad=aj[3],ae=aj[4],ac=aj[5],ab=aj[6],aa=aj[7],Z=aj[8],Y=aj[9],V=aj[10],X=aj[11],W=aj[12],U=aj[13],Q=aj[14],O=aj[15],T=ah*ac-ag*ae,S=ah*ab-af*ae,M=ah*aa-ad*ae,K=ag*ab-af*ac,J=ag*aa-ad*ac,I=af*aa-ad*ab,H=Z*U-Y*W,G=Z*Q-V*W,F=Z*O-X*W,P=Y*Q-V*U,N=Y*O-X*U,L=V*O-X*Q,R=1/(T*L-S*N+M*P+K*F-J*G+I*H);ai[0]=(ac*L-ab*N+aa*P)*R;ai[1]=(-ag*L+af*N-ad*P)*R;ai[2]=(U*I-Q*J+O*K)*R;ai[3]=(-Y*I+V*J-X*K)*R;ai[4]=(-ae*L+ab*F-aa*G)*R;ai[5]=(ah*L-af*F+ad*G)*R;ai[6]=(-W*I+Q*M-O*S)*R;ai[7]=(Z*I-V*M+X*S)*R;ai[8]=(ae*N-ac*F+aa*H)*R;ai[9]=(-ah*N+ag*F-ad*H)*R;ai[10]=(W*J-U*M+O*T)*R;ai[11]=(-Z*J+Y*M-X*T)*R;ai[12]=(-ae*P+ac*G-ab*H)*R;ai[13]=(ah*P-ag*G+af*H)*R;ai[14]=(-W*K+U*S-Q*T)*R;ai[15]=(Z*K-Y*S+V*T)*R;return ai;};b.toMat3=function(f,e){e||(e=c.create());e[0]=f[0];e[1]=f[1];e[2]=f[2];e[3]=f[4];e[4]=f[5];e[5]=f[6];e[6]=f[8];e[7]=f[9];e[8]=f[10];return e;};b.toInverseMat3=function(D,C){var B=D[0],A=D[1],z=D[2],x=D[4],y=D[5],w=D[6],v=D[8],u=D[9],t=D[10],s=t*y-w*u,p=-t*x+w*v,r=u*x-y*v,q=B*s+A*p+z*r;if(!q){return null;}q=1/q;C||(C=c.create());C[0]=s*q;C[1]=(-t*A+z*u)*q;C[2]=(w*A-z*y)*q;C[3]=p*q;C[4]=(t*B-z*v)*q;C[5]=(-w*B+z*x)*q;C[6]=r*q;C[7]=(-u*B+A*v)*q;C[8]=(y*B-A*x)*q;return C;};b.multiply=function(an,am,al){al||(al=an);var ak=an[0],aj=an[1],ah=an[2],ai=an[3],ag=an[4],af=an[5],ae=an[6],ad=an[7],ac=an[8],Z=an[9],ab=an[10],aa=an[11],Y=an[12],U=an[13],S=an[14];an=an[15];var X=am[0],W=am[1],Q=am[2],O=am[3],M=am[4],K=am[5],J=am[6],I=am[7],H=am[8],T=am[9],R=am[10],P=am[11],V=am[12],N=am[13],L=am[14];am=am[15];al[0]=X*ak+W*ag+Q*ac+O*Y;al[1]=X*aj+W*af+Q*Z+O*U;al[2]=X*ah+W*ae+Q*ab+O*S;al[3]=X*ai+W*ad+Q*aa+O*an;al[4]=M*ak+K*ag+J*ac+I*Y;al[5]=M*aj+K*af+J*Z+I*U;al[6]=M*ah+K*ae+J*ab+I*S;al[7]=M*ai+K*ad+J*aa+I*an;al[8]=H*ak+T*ag+R*ac+P*Y;al[9]=H*aj+T*af+R*Z+P*U;al[10]=H*ah+T*ae+R*ab+P*S;al[11]=H*ai+T*ad+R*aa+P*an;al[12]=V*ak+N*ag+L*ac+am*Y;al[13]=V*aj+N*af+L*Z+am*U;al[14]=V*ah+N*ae+L*ab+am*S;al[15]=V*ai+N*ad+L*aa+am*an;return al;};b.multiplyVec3=function(g,f,j){j||(j=f);var i=f[0],h=f[1];f=f[2];j[0]=g[0]*i+g[4]*h+g[8]*f+g[12];j[1]=g[1]*i+g[5]*h+g[9]*f+g[13];j[2]=g[2]*i+g[6]*h+g[10]*f+g[14];return j;};b.multiplyVec4=function(h,f,l){l||(l=f);var k=f[0],j=f[1],i=f[2];f=f[3];l[0]=h[0]*k+h[4]*j+h[8]*i+h[12]*f;l[1]=h[1]*k+h[5]*j+h[9]*i+h[13]*f;l[2]=h[2]*k+h[6]*j+h[10]*i+h[14]*f;l[4]=h[4]*k+h[7]*j+h[11]*i+h[15]*f;return l;};b.translate=function(H,G,F){var E=G[0],D=G[1];G=G[2];if(!F||H==F){H[12]=H[0]*E+H[4]*D+H[8]*G+H[12];H[13]=H[1]*E+H[5]*D+H[9]*G+H[13];H[14]=H[2]*E+H[6]*D+H[10]*G+H[14];H[15]=H[3]*E+H[7]*D+H[11]*G+H[15];return H;}var B=H[0],C=H[1],A=H[2],z=H[3],y=H[4],x=H[5],w=H[6],t=H[7],v=H[8],u=H[9],s=H[10],q=H[11];F[0]=B;F[1]=C;F[2]=A;F[3]=z;F[4]=y;F[5]=x;F[6]=w;F[7]=t;F[8]=v;F[9]=u;F[10]=s;F[11]=q;F[12]=B*E+y*D+v*G+H[12];F[13]=C*E+x*D+u*G+H[13];F[14]=A*E+w*D+s*G+H[14];F[15]=z*E+t*D+q*G+H[15];return F;};b.scale=function(g,f,j){var i=f[0],h=f[1];f=f[2];if(!j||g==j){g[0]*=i;g[1]*=i;g[2]*=i;g[3]*=i;g[4]*=h;g[5]*=h;g[6]*=h;g[7]*=h;g[8]*=f;g[9]*=f;g[10]*=f;g[11]*=f;return g;}j[0]=g[0]*i;j[1]=g[1]*i;j[2]=g[2]*i;j[3]=g[3]*i;j[4]=g[4]*h;j[5]=g[5]*h;j[6]=g[6]*h;j[7]=g[7]*h;j[8]=g[8]*f;j[9]=g[9]*f;j[10]=g[10]*f;j[11]=g[11]*f;j[12]=g[12];j[13]=g[13];j[14]=g[14];j[15]=g[15];return j;};b.rotate=function(ab,aa,Z,Y){var X=Z[0],V=Z[1];Z=Z[2];var W=Math.sqrt(X*X+V*V+Z*Z);if(!W){return null;}if(W!=1){W=1/W;X*=W;V*=W;Z*=W;}var U=Math.sin(aa),T=Math.cos(aa),S=1-T;aa=ab[0];W=ab[1];var R=ab[2],Q=ab[3],N=ab[4],P=ab[5],O=ab[6],M=ab[7],J=ab[8],I=ab[9],L=ab[10],K=ab[11],H=X*X*S+T,G=V*X*S+Z*U,F=Z*X*S-V*U,E=X*V*S-Z*U,D=V*V*S+T,C=Z*V*S+X*U,q=X*Z*S+V*U;X=V*Z*S-X*U;V=Z*Z*S+T;if(Y){if(ab!=Y){Y[12]=ab[12];Y[13]=ab[13];Y[14]=ab[14];Y[15]=ab[15];}}else{Y=ab;}Y[0]=aa*H+N*G+J*F;Y[1]=W*H+P*G+I*F;Y[2]=R*H+O*G+L*F;Y[3]=Q*H+M*G+K*F;Y[4]=aa*E+N*D+J*C;Y[5]=W*E+P*D+I*C;Y[6]=R*E+O*D+L*C;Y[7]=Q*E+M*D+K*C;Y[8]=aa*q+N*X+J*V;Y[9]=W*q+P*X+I*V;Y[10]=R*q+O*X+L*V;Y[11]=Q*q+M*X+K*V;return Y;};b.rotateX=function(x,w,v){var u=Math.sin(w);w=Math.cos(w);var t=x[4],r=x[5],s=x[6],q=x[7],p=x[8],o=x[9],n=x[10],m=x[11];if(v){if(x!=v){v[0]=x[0];v[1]=x[1];v[2]=x[2];v[3]=x[3];v[12]=x[12];v[13]=x[13];v[14]=x[14];v[15]=x[15];}}else{v=x;}v[4]=t*w+p*u;v[5]=r*w+o*u;v[6]=s*w+n*u;v[7]=q*w+m*u;v[8]=t*-u+p*w;v[9]=r*-u+o*w;v[10]=s*-u+n*w;v[11]=q*-u+m*w;return v;};b.rotateY=function(x,w,v){var u=Math.sin(w);w=Math.cos(w);var t=x[0],r=x[1],s=x[2],q=x[3],p=x[8],o=x[9],n=x[10],m=x[11];if(v){if(x!=v){v[4]=x[4];v[5]=x[5];v[6]=x[6];v[7]=x[7];v[12]=x[12];v[13]=x[13];v[14]=x[14];v[15]=x[15];}}else{v=x;}v[0]=t*w+p*-u;v[1]=r*w+o*-u;v[2]=s*w+n*-u;v[3]=q*w+m*-u;v[8]=t*u+p*w;v[9]=r*u+o*w;v[10]=s*u+n*w;v[11]=q*u+m*w;return v;};b.rotateZ=function(x,w,v){var u=Math.sin(w);w=Math.cos(w);var t=x[0],r=x[1],s=x[2],q=x[3],p=x[4],o=x[5],n=x[6],m=x[7];if(v){if(x!=v){v[8]=x[8];v[9]=x[9];v[10]=x[10];v[11]=x[11];v[12]=x[12];v[13]=x[13];v[14]=x[14];v[15]=x[15];}}else{v=x;}v[0]=t*w+p*u;v[1]=r*w+o*u;v[2]=s*w+n*u;v[3]=q*w+m*u;v[4]=t*-u+p*w;v[5]=r*-u+o*w;v[6]=s*-u+n*w;v[7]=q*-u+m*w;return v;};b.frustum=function(t,s,r,q,p,n,o){o||(o=b.create());var m=s-t,l=q-r,k=n-p;o[0]=p*2/m;o[1]=0;o[2]=0;o[3]=0;o[4]=0;o[5]=p*2/l;o[6]=0;o[7]=0;o[8]=(s+t)/m;o[9]=(q+r)/l;o[10]=-(n+p)/k;o[11]=-1;o[12]=0;o[13]=0;o[14]=-(n*p*2)/k;o[15]=0;return o;};b.perspective=function(g,f,j,i,h){g=j*Math.tan(g*Math.PI/360);f=g*f;return b.frustum(-f,f,-g,g,j,i,h);};b.ortho=function(t,s,r,q,p,n,o){o||(o=b.create());var m=s-t,l=q-r,k=n-p;o[0]=2/m;o[1]=0;o[2]=0;o[3]=0;o[4]=0;o[5]=2/l;o[6]=0;o[7]=0;o[8]=0;o[9]=0;o[10]=-2/k;o[11]=0;o[12]=(t+s)/m;o[13]=(q+r)/l;o[14]=(n+p)/k;o[15]=1;return o;};b.lookAt=function(B,A,z,y){y||(y=b.create());var x=B[0],v=B[1];B=B[2];var w=z[0],u=z[1],t=z[2];z=A[1];var s=A[2];if(x==A[0]&&v==z&&B==s){return b.identity(y);}var r,q,n,p;z=x-A[0];s=v-A[1];A=B-A[2];p=1/Math.sqrt(z*z+s*s+A*A);z*=p;s*=p;A*=p;r=u*A-t*s;t=t*z-w*A;w=w*s-u*z;if(p=Math.sqrt(r*r+t*t+w*w)){p=1/p;r*=p;t*=p;w*=p;}else{w=t=r=0;}u=s*w-A*t;q=A*r-z*w;n=z*t-s*r;if(p=Math.sqrt(u*u+q*q+n*n)){p=1/p;u*=p;q*=p;n*=p;}else{n=q=u=0;}y[0]=r;y[1]=u;y[2]=z;y[3]=0;y[4]=t;y[5]=q;y[6]=s;y[7]=0;y[8]=w;y[9]=n;y[10]=A;y[11]=0;y[12]=-(r*x+t*v+w*B);y[13]=-(u*x+q*v+n*B);y[14]=-(z*x+s*v+A*B);y[15]=1;return y;};b.str=function(e){return"["+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+"]";};quat4={};quat4.create=function(f){var e=new glMatrixArrayType(4);if(f){e[0]=f[0];e[1]=f[1];e[2]=f[2];e[3]=f[3];}return e;};quat4.set=function(f,e){e[0]=f[0];e[1]=f[1];e[2]=f[2];e[3]=f[3];return e;};quat4.calculateW=function(g,f){var j=g[0],i=g[1],h=g[2];if(!f||g==f){g[3]=-Math.sqrt(Math.abs(1-j*j-i*i-h*h));return g;}f[0]=j;f[1]=i;f[2]=h;f[3]=-Math.sqrt(Math.abs(1-j*j-i*i-h*h));return f;};quat4.inverse=function(f,e){if(!e||f==e){f[0]*=1;f[1]*=1;f[2]*=1;return f;}e[0]=-f[0];e[1]=-f[1];e[2]=-f[2];e[3]=f[3];return e;};quat4.length=function(f){var e=f[0],h=f[1],g=f[2];f=f[3];return Math.sqrt(e*e+h*h+g*g+f*f);};quat4.normalize=function(i,h){h||(h=i);var n=i[0],m=i[1],l=i[2],j=i[3],k=Math.sqrt(n*n+m*m+l*l+j*j);if(k==0){h[0]=0;h[1]=0;h[2]=0;h[3]=0;return h;}k=1/k;h[0]=n*k;h[1]=m*k;h[2]=l*k;h[3]=j*k;return h;};quat4.multiply=function(r,q,p){p||(p=r);var o=r[0],n=r[1],l=r[2];r=r[3];var m=q[0],k=q[1],j=q[2];q=q[3];p[0]=o*q+r*m+n*j-l*k;p[1]=n*q+r*k+l*m-o*j;p[2]=l*q+r*j+o*k-n*m;p[3]=r*q-o*m-n*k-l*j;return p;};quat4.multiplyVec3=function(v,u,t){t||(t=u);var s=u[0],r=u[1],p=u[2];u=v[0];var q=v[1],o=v[2];v=v[3];var n=v*s+q*p-o*r,m=v*r+o*s-u*p,l=v*p+u*r-q*s;s=-u*s-q*r-o*p;t[0]=n*v+s*-u+m*-o-l*-q;t[1]=m*v+s*-q+l*-u-n*-o;t[2]=l*v+s*-o+n*-q-m*-u;return t;};quat4.toMat3=function(x,w){w||(w=c.create());var v=x[0],u=x[1],t=x[2],r=x[3],s=v+v,q=u+u,p=t+t,o=v*s,n=v*q;v=v*p;var m=u*q;u=u*p;t=t*p;s=r*s;q=r*q;r=r*p;w[0]=1-(m+t);w[1]=n-r;w[2]=v+q;w[3]=n+r;w[4]=1-(o+t);w[5]=u-s;w[6]=v-q;w[7]=u+s;w[8]=1-(o+m);return w;};quat4.toMat4=function(x,w){w||(w=b.create());var v=x[0],u=x[1],t=x[2],r=x[3],s=v+v,q=u+u,p=t+t,o=v*s,n=v*q;v=v*p;var m=u*q;u=u*p;t=t*p;s=r*s;q=r*q;r=r*p;w[0]=1-(m+t);w[1]=n-r;w[2]=v+q;w[3]=0;w[4]=n+r;w[5]=1-(o+t);w[6]=u-s;w[7]=0;w[8]=v-q;w[9]=u+s;w[10]=1-(o+m);w[11]=0;w[12]=0;w[13]=0;w[14]=0;w[15]=1;return w;};quat4.str=function(e){return"["+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+"]";};a.GLMatrix=b;})(jigLib);