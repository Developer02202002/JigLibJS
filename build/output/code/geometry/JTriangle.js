(function(a){var f=a.Vector3DUtil;var c=a.JNumber3D;var e=a.CollOutData;var g=a.PlaneData;var d=a.SpanData;var b=function(j,i,h){origin=f.clone(j);edge0=f.subtract(i,j);edge1=f.subtract(h,j);};b.prototype.get_edge2=function(){return f.subtract(edge1,edge0);};b.prototype.get_normal=function(){var h=f.crossProduct(edge0,edge1);f.normalize(h);return h;};b.prototype.get_plane=function(){var h=new g();h.setWithNormal(origin,normal);return h;};b.prototype.getPoint=function(j,h){var k,i;k=f.crossProduct(edge0);i=f.crossProduct(edge1);f.scaleBy(k,j);f.scaleBy(i,h);return f.add(f.add(origin,k),i);};b.prototype.getCentre=function(){var h=f.add(edge0,edge1);f.scaleBy(h,0.333333);return f.add(origin,h);};b.prototype.getVertex=function(h){switch(h){case 1:return f.add(origin,edge0);case 2:return f.add(origin,edge1);default:return origin;}};b.prototype.getSpan=function(i){var l,k,j;l=f.dotProduct(this.getVertex(0),i);k=f.dotProduct(this.getVertex(1),i);j=f.dotProduct(this.getVertex(2),i);var h=new d();h.min=Math.min(l,k,j);h.max=Math.max(l,k,j);return h;};b.prototype.segmentTriangleIntersection=function(j,k){var o,n,r,m,l;var i,w,h;i=f.crossProduct(k.delta,edge1);m=f.dotProduct(edge0,i);if(m>-c.NUM_TINY&&m<c.NUM_TINY){return false;}l=1/m;w=f.subtract(k.origin,origin);o=l*w.dotProduct(i);if(o<0||o>1){return false;}h=f.crossProduct(w,edge0);n=l*f.dotProduct(k.delta,h);if(n<0||(o+n)>1){return false;}r=l*f.dotProduct(edge1,h);if(r<0||r>1){return false;}if(j){j.frac=r;}return true;};b.prototype.pointTriangleDistanceSq=function(p,n){var m,l,s,w,v,k,o,y,x,i;var r=f.subtract(origin,n);m=f.get_lengthSquared(edge0);l=f.dotProduct(edge0,edge1);s=f.get_lengthSquared(edge1);w=f.dotProduct(r,edge0);v=f.dotProduct(r,edge1);k=f.get_lengthSquared(r);o=Math.abs(m*s-l*l);y=l*v-s*w;x=l*w-m*v;if(y+x<=o){if(y<0){if(x<0){if(w<0){x=0;if(-w>=m){y=1;i=m+2*w+k;}else{y=-w/m;i=w*y+k;}}else{y=0;if(v>=0){x=0;i=k;}else{if(-v>=s){x=1;i=s+2*v+k;}else{x=-v/s;i=v*x+k;}}}}else{y=0;if(v>=0){x=0;i=k;}else{if(-v>=s){x=1;i=s+2*v+k;}else{x=-v/s;i=v*x+k;}}}}else{if(x<0){x=0;if(w>=0){y=0;i=k;}else{if(-w>=m){y=1;i=m+2*w+k;}else{y=-w/m;i=w*y+k;}}}else{var h=1/o;y*=h;x*=h;i=y*(m*y+l*x+2*w)+x*(l*y+s*x+2*v)+k;}}}else{var u;var t;var j;var q;if(y<0){u=l+w;t=s+v;if(t>u){j=t-u;q=m-2*l+s;if(j>=q){y=1;x=0;i=m+2*w+k;}else{y=j/q;x=1-y;i=y*(m*y+l*x+2*w)+x*(l*y+s*x+2*v)+k;}}else{y=0;if(t<=0){x=1;i=s+2*v+k;}else{if(v>=0){x=0;i=k;}else{x=-v/s;i=v*x+k;}}}}else{if(x<0){u=l+v;t=m+w;if(t>u){j=t-u;q=m-2*l+s;if(j>=q){x=1;y=0;i=s+2*v+k;}else{x=j/q;y=1-x;i=y*(m*y+l*x+2*w)+x*(l*y+s*x+2*v)+k;}}else{x=0;if(t<=0){y=1;i=m+2*w+k;}else{if(w>=0){y=0;i=k;}else{y=-w/m;i=w*y+k;}}}}else{j=s+v-l-w;if(j<=0){y=0;x=1;i=s+2*v+k;}else{q=m-2*l+s;if(j>=q){y=1;x=0;i=m+2*w+k;}else{y=j/q;x=1-y;i=y*(m*y+l*x+2*w)+x*(l*y+s*x+2*v)+k;}}}}}p[0]=y;p[1]=x;return Math.abs(i);};a.JTriangle=b;})(jigLib);