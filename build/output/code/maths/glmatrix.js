if(typeof Float32Array!="undefined"){glMatrixArrayType=Float32Array;}else{if(typeof WebGLFloatArray!="undefined"){glMatrixArrayType=WebGLFloatArray;}else{glMatrixArrayType=Array;}}var vec3={};vec3.create=function(b){var a=new glMatrixArrayType(3);if(b){a[0]=b[0];a[1]=b[1];a[2]=b[2];}return a;};vec3.set=function(b,a){a[0]=b[0];a[1]=b[1];a[2]=b[2];return a;};vec3.add=function(b,c,a){if(!a||b==a){b[0]+=c[0];b[1]+=c[1];b[2]+=c[2];return b;}a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];return a;};vec3.subtract=function(b,c,a){if(!a||b==a){b[0]-=c[0];b[1]-=c[1];b[2]-=c[2];return b;}a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];return a;};vec3.negate=function(b,a){if(!a){a=b;}a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];return a;};vec3.scale=function(b,c,a){if(!a||b==a){b[0]*=c;b[1]*=c;b[2]*=c;return b;}a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;return a;};vec3.normalize=function(d,c){if(!c){c=d;}var b=d[0],f=d[1],e=d[2];var a=Math.sqrt(b*b+f*f+e*e);if(!a){c[0]=0;c[1]=0;c[2]=0;return c;}else{if(a==1){c[0]=b;c[1]=f;c[2]=e;return c;}}a=1/a;c[0]=b*a;c[1]=f*a;c[2]=e*a;return c;};vec3.cross=function(b,d,i){if(!i){i=b;}var h=b[0],f=b[1],e=b[2];var a=d[0],g=d[1],c=d[2];i[0]=f*c-e*g;i[1]=e*a-h*c;i[2]=h*g-f*a;return i;};vec3.length=function(b){var a=b[0],d=b[1],c=b[2];return Math.sqrt(a*a+d*d+c*c);};vec3.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2];};vec3.direction=function(d,e,c){if(!c){c=d;}var b=d[0]-e[0];var g=d[1]-e[1];var f=d[2]-e[2];var a=Math.sqrt(b*b+g*g+f*f);if(!a){c[0]=0;c[1]=0;c[2]=0;return c;}a=1/a;c[0]=b*a;c[1]=g*a;c[2]=f*a;return c;};vec3.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]";};var mat3={};mat3.create=function(b){var a=new glMatrixArrayType(9);if(b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];}return a;};mat3.set=function(b,a){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a;};mat3.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a;};mat3.toMat4=function(b,a){if(!a){a=mat4.create();}a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=0;a[4]=b[3];a[5]=b[4];a[6]=b[5];a[7]=0;a[8]=b[6];a[9]=b[7];a[10]=b[8];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a;};mat3.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]";};var mat4={};mat4.create=function(b){var a=new glMatrixArrayType(16);if(b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];}return a;};mat4.set=function(b,a){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a;};mat4.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a;};mat4.transpose=function(d,c){if(!c||d==c){var h=d[1],f=d[2],e=d[3];var a=d[6],g=d[7];var b=d[11];d[1]=d[4];d[2]=d[8];d[3]=d[12];d[4]=h;d[6]=d[9];d[7]=d[13];d[8]=f;d[9]=a;d[11]=d[14];d[12]=e;d[13]=g;d[14]=b;return d;}c[0]=d[0];c[1]=d[4];c[2]=d[8];c[3]=d[12];c[4]=d[1];c[5]=d[5];c[6]=d[9];c[7]=d[13];c[8]=d[2];c[9]=d[6];c[10]=d[10];c[11]=d[14];c[12]=d[3];c[13]=d[7];c[14]=d[11];c[15]=d[15];return c;};mat4.determinant=function(o){var h=o[0],g=o[1],e=o[2],c=o[3];var q=o[4],p=o[5],n=o[6],m=o[7];var l=o[8],k=o[9],j=o[10],i=o[11];var f=o[12],d=o[13],b=o[14],a=o[15];return f*k*n*c-l*d*n*c-f*p*j*c+q*d*j*c+l*p*b*c-q*k*b*c-f*k*e*m+l*d*e*m+f*g*j*m-h*d*j*m-l*g*b*m+h*k*b*m+f*p*e*i-q*d*e*i-f*g*n*i+h*d*n*i+q*g*b*i-h*p*b*i-l*p*e*a+q*k*e*a+l*g*n*a-h*k*n*a-q*g*j*a+h*p*j*a;};mat4.inverse=function(v,k){if(!k){k=v;}var C=v[0],A=v[1],z=v[2],x=v[3];var d=v[4],c=v[5],b=v[6],a=v[7];var s=v[8],r=v[9],q=v[10],p=v[11];var E=v[12],D=v[13],B=v[14],y=v[15];var o=C*c-A*d;var n=C*b-z*d;var m=C*a-x*d;var l=A*b-z*c;var j=A*a-x*c;var i=z*a-x*b;var h=s*D-r*E;var g=s*B-q*E;var f=s*y-p*E;var e=r*B-q*D;var w=r*y-p*D;var u=q*y-p*B;var t=1/(o*u-n*w+m*e+l*f-j*g+i*h);k[0]=(c*u-b*w+a*e)*t;k[1]=(-A*u+z*w-x*e)*t;k[2]=(D*i-B*j+y*l)*t;k[3]=(-r*i+q*j-p*l)*t;k[4]=(-d*u+b*f-a*g)*t;k[5]=(C*u-z*f+x*g)*t;k[6]=(-E*i+B*m-y*n)*t;k[7]=(s*i-q*m+p*n)*t;k[8]=(d*w-c*f+a*h)*t;k[9]=(-C*w+A*f-x*h)*t;k[10]=(E*j-D*m+y*o)*t;k[11]=(-s*j+r*m-p*o)*t;k[12]=(-d*e+c*g-b*h)*t;k[13]=(C*e-A*g+z*h)*t;k[14]=(-E*l+D*n-B*o)*t;k[15]=(s*l-r*n+q*o)*t;return k;};mat4.toRotationMat=function(b,a){if(!a){a=mat4.create();}a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a;};mat4.toMat3=function(b,a){if(!a){a=mat3.create();}a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[4];a[4]=b[5];a[5]=b[6];a[6]=b[8];a[7]=b[9];a[8]=b[10];return a;};mat4.toInverseMat3=function(o,m){var f=o[0],e=o[1],c=o[2];var q=o[4],p=o[5],n=o[6];var j=o[8],i=o[9],h=o[10];var g=h*p-n*i;var b=-h*q+n*j;var l=i*q-p*j;var k=f*g+e*b+c*l;if(!k){return null;}var a=1/k;if(!m){m=mat3.create();}m[0]=g*a;m[1]=(-h*e+c*i)*a;m[2]=(n*e-c*p)*a;m[3]=b*a;m[4]=(h*f-c*j)*a;m[5]=(-n*f+c*q)*a;m[6]=l*a;m[7]=(-i*f+e*j)*a;m[8]=(p*f-e*q)*a;return m;};mat4.multiply=function(z,i,j){if(!j){j=z;}var G=z[0],F=z[1],D=z[2],B=z[3];var h=z[4],g=z[5],f=z[6],e=z[7];var v=z[8],u=z[9],t=z[10],s=z[11];var I=z[12],H=z[13],E=z[14],C=z[15];var q=i[0],o=i[1],m=i[2],k=i[3];var A=i[4],y=i[5],x=i[6],w=i[7];var d=i[8],c=i[9],b=i[10],a=i[11];var r=i[12],p=i[13],n=i[14],l=i[15];j[0]=q*G+o*h+m*v+k*I;j[1]=q*F+o*g+m*u+k*H;j[2]=q*D+o*f+m*t+k*E;j[3]=q*B+o*e+m*s+k*C;j[4]=A*G+y*h+x*v+w*I;j[5]=A*F+y*g+x*u+w*H;j[6]=A*D+y*f+x*t+w*E;j[7]=A*B+y*e+x*s+w*C;j[8]=d*G+c*h+b*v+a*I;j[9]=d*F+c*g+b*u+a*H;j[10]=d*D+c*f+b*t+a*E;j[11]=d*B+c*e+b*s+a*C;j[12]=r*G+p*h+n*v+l*I;j[13]=r*F+p*g+n*u+l*H;j[14]=r*D+p*f+n*t+l*E;j[15]=r*B+p*e+n*s+l*C;return j;};mat4.multiplyVec3=function(d,c,b){if(!b){b=c;}var a=c[0],f=c[1],e=c[2];b[0]=d[0]*a+d[4]*f+d[8]*e+d[12];b[1]=d[1]*a+d[5]*f+d[9]*e+d[13];b[2]=d[2]*a+d[6]*f+d[10]*e+d[14];return b;};mat4.multiplyVec4=function(e,d,c){if(!c){c=d;}var a=d[0],g=d[1],f=d[2],b=d[3];c[0]=e[0]*a+e[4]*g+e[8]*f+e[12]*b;c[1]=e[1]*a+e[5]*g+e[9]*f+e[13]*b;c[2]=e[2]*a+e[6]*g+e[10]*f+e[14]*b;c[4]=e[4]*a+e[7]*g+e[11]*f+e[15]*b;return c;};mat4.translate=function(n,i,g){var h=i[0],f=i[1],e=i[2];if(!g||n==g){n[12]=n[0]*h+n[4]*f+n[8]*e+n[12];n[13]=n[1]*h+n[5]*f+n[9]*e+n[13];n[14]=n[2]*h+n[6]*f+n[10]*e+n[14];n[15]=n[3]*h+n[7]*f+n[11]*e+n[15];return n;}var r=n[0],q=n[1],p=n[2],o=n[3];var d=n[4],c=n[5],b=n[6],a=n[7];var m=n[8],l=n[9],k=n[10],j=n[11];g[0]=r;g[1]=q;g[2]=p;g[3]=o;g[4]=d;g[5]=c;g[6]=b;g[7]=a;g[8]=m;g[9]=l;g[10]=k;g[11]=j;g[12]=r*h+d*f+m*e+n[12];g[13]=q*h+c*f+l*e+n[13];g[14]=p*h+b*f+k*e+n[14];g[15]=o*h+a*f+j*e+n[15];return g;};mat4.scale=function(d,c,b){var a=c[0],f=c[1],e=c[2];if(!b||d==b){d[0]*=a;d[1]*=a;d[2]*=a;d[3]*=a;d[4]*=f;d[5]*=f;d[6]*=f;d[7]*=f;d[8]*=e;d[9]*=e;d[10]*=e;d[11]*=e;return d;}b[0]=d[0]*a;b[1]=d[1]*a;b[2]=d[2]*a;b[3]=d[3]*a;b[4]=d[4]*f;b[5]=d[5]*f;b[6]=d[6]*f;b[7]=d[7]*f;b[8]=d[8]*e;b[9]=d[9]*e;b[10]=d[10]*e;b[11]=d[11]*e;b[12]=d[12];b[13]=d[13];b[14]=d[14];b[15]=d[15];return b;};mat4.rotate=function(F,D,a,l){var m=a[0],k=a[1],j=a[2];var B=Math.sqrt(m*m+k*k+j*j);if(!B){return null;}if(B!=1){B=1/B;m*=B;k*=B;j*=B;}var r=Math.sin(D);var H=Math.cos(D);var q=1-H;var L=F[0],K=F[1],J=F[2],I=F[3];var i=F[4],h=F[5],g=F[6],f=F[7];var A=F[8],w=F[9],v=F[10],u=F[11];var p=m*m*q+H,o=k*m*q+j*r,n=j*m*q-k*r;var G=m*k*q-j*r,E=k*k*q+H,C=j*k*q+m*r;var e=m*j*q+k*r,d=k*j*q-m*r,b=j*j*q+H;if(!l){l=F;}else{if(F!=l){l[12]=F[12];l[13]=F[13];l[14]=F[14];l[15]=F[15];}}l[0]=L*p+i*o+A*n;l[1]=K*p+h*o+w*n;l[2]=J*p+g*o+v*n;l[3]=I*p+f*o+u*n;l[4]=L*G+i*E+A*C;l[5]=K*G+h*E+w*C;l[6]=J*G+g*E+v*C;l[7]=I*G+f*E+u*C;l[8]=L*e+i*d+A*b;l[9]=K*e+h*d+w*b;l[10]=J*e+g*d+v*b;l[11]=I*e+f*d+u*b;return l;};mat4.rotateX=function(k,a,i){var n=Math.sin(a);var g=Math.cos(a);var m=k[4],l=k[5],j=k[6],h=k[7];var f=k[8],e=k[9],d=k[10],b=k[11];if(!i){i=k;}else{if(k!=i){i[0]=k[0];i[1]=k[1];i[2]=k[2];i[3]=k[3];i[12]=k[12];i[13]=k[13];i[14]=k[14];i[15]=k[15];}}i[4]=m*g+f*n;i[5]=l*g+e*n;i[6]=j*g+d*n;i[7]=h*g+b*n;i[8]=m*-n+f*g;i[9]=l*-n+e*g;i[10]=j*-n+d*g;i[11]=h*-n+b*g;return i;};mat4.rotateY=function(m,e,l){var n=Math.sin(e);var k=Math.cos(e);var f=m[0],d=m[1],b=m[2],a=m[3];var j=m[8],i=m[9],h=m[10],g=m[11];if(!l){l=m;}else{if(m!=l){l[4]=m[4];l[5]=m[5];l[6]=m[6];l[7]=m[7];l[12]=m[12];l[13]=m[13];l[14]=m[14];l[15]=m[15];}}l[0]=f*k+j*-n;l[1]=d*k+i*-n;l[2]=b*k+h*-n;l[3]=a*k+g*-n;l[8]=f*n+j*k;l[9]=d*n+i*k;l[10]=b*n+h*k;l[11]=a*n+g*k;return l;};mat4.rotateZ=function(l,e,i){var n=Math.sin(e);var g=Math.cos(e);var f=l[0],d=l[1],b=l[2],a=l[3];var m=l[4],k=l[5],j=l[6],h=l[7];if(!i){i=l;}else{if(l!=i){i[8]=l[8];i[9]=l[9];i[10]=l[10];i[11]=l[11];i[12]=l[12];i[13]=l[13];i[14]=l[14];i[15]=l[15];}}i[0]=f*g+m*n;i[1]=d*g+k*n;i[2]=b*g+j*n;i[3]=a*g+h*n;i[4]=f*-n+m*g;i[5]=d*-n+k*g;i[6]=b*-n+j*g;i[7]=a*-n+h*g;return i;};mat4.frustum=function(b,j,a,h,e,d,i){if(!i){i=mat4.create();}var f=(j-b);var c=(h-a);var g=(d-e);i[0]=(e*2)/f;i[1]=0;i[2]=0;i[3]=0;i[4]=0;i[5]=(e*2)/c;i[6]=0;i[7]=0;i[8]=(j+b)/f;i[9]=(h+a)/c;i[10]=-(d+e)/g;i[11]=-1;i[12]=0;i[13]=0;i[14]=-(d*e*2)/g;i[15]=0;return i;};mat4.perspective=function(c,b,f,a,d){var g=f*Math.tan(c*Math.PI/360);var e=g*b;return mat4.frustum(-e,e,-g,g,f,a,d);};mat4.ortho=function(b,j,a,h,e,d,i){if(!i){i=mat4.create();}var f=(j-b);var c=(h-a);var g=(d-e);i[0]=2/f;i[1]=0;i[2]=0;i[3]=0;i[4]=0;i[5]=2/c;i[6]=0;i[7]=0;i[8]=0;i[9]=0;i[10]=-2/g;i[11]=0;i[12]=-(b+j)/f;i[13]=-(h+a)/c;i[14]=-(d+e)/g;i[15]=1;return i;};mat4.lookAt=function(v,w,h,g){if(!g){g=mat4.create();}var t=v[0],r=v[1],o=v[2],f=h[0],e=h[1],d=h[2],n=w[0],m=w[1],l=w[2];if(t==n&&r==m&&o==l){return mat4.identity(g);}var k,j,i,u,s,q,c,b,a,p;k=t-w[0];j=r-w[1];i=o-w[2];p=1/Math.sqrt(k*k+j*j+i*i);k*=p;j*=p;i*=p;u=e*i-d*j;s=d*k-f*i;q=f*j-e*k;p=Math.sqrt(u*u+s*s+q*q);if(!p){u=0;s=0;q=0;}else{p=1/p;u*=p;s*=p;q*=p;}c=j*q-i*s;b=i*u-k*q;a=k*s-j*u;p=Math.sqrt(c*c+b*b+a*a);if(!p){c=0;b=0;a=0;}else{p=1/p;c*=p;b*=p;a*=p;}g[0]=u;g[1]=c;g[2]=k;g[3]=0;g[4]=s;g[5]=b;g[6]=j;g[7]=0;g[8]=q;g[9]=a;g[10]=i;g[11]=0;g[12]=-(u*t+s*r+q*o);g[13]=-(c*t+b*r+a*o);g[14]=-(k*t+j*r+i*o);g[15]=1;return g;};mat4.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]";};quat4={};quat4.create=function(b){var a=new glMatrixArrayType(4);if(b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];}return a;};quat4.set=function(b,a){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a;};quat4.calculateW=function(c,b){var a=c[0],e=c[1],d=c[2];if(!b||c==b){c[3]=-Math.sqrt(Math.abs(1-a*a-e*e-d*d));return c;}b[0]=a;b[1]=e;b[2]=d;b[3]=-Math.sqrt(Math.abs(1-a*a-e*e-d*d));return b;};quat4.inverse=function(b,a){if(!a||b==a){b[0]*=1;b[1]*=1;b[2]*=1;return b;}a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=b[3];return a;};quat4.length=function(c){var a=c[0],e=c[1],d=c[2],b=c[3];return Math.sqrt(a*a+e*e+d*d+b*b);};quat4.normalize=function(e,d){if(!d){d=e;}var b=e[0],g=e[1],f=e[2],c=e[3];var a=Math.sqrt(b*b+g*g+f*f+c*c);if(a==0){d[0]=0;d[1]=0;d[2]=0;d[3]=0;return d;}a=1/a;d[0]=b*a;d[1]=g*a;d[2]=f*a;d[3]=c*a;return d;};quat4.multiply=function(b,d,k){if(!k){k=b;}var i=b[0],h=b[1],g=b[2],j=b[3];var e=d[0],c=d[1],a=d[2],f=d[3];k[0]=i*f+j*e+h*a-g*c;k[1]=h*f+j*c+g*e-i*a;k[2]=g*f+j*a+i*c-h*e;k[3]=j*f-i*e-h*c-g*a;return k;};quat4.multiplyVec3=function(b,d,n){if(!n){n=d;}var m=d[0],l=d[1],k=d[2];var i=b[0],h=b[1],g=b[2],j=b[3];var e=j*m+h*k-g*l;var c=j*l+g*m-i*k;var a=j*k+i*l-h*m;var f=-i*m-h*l-g*k;n[0]=e*j+f*-i+c*-g-a*-h;n[1]=c*j+f*-h+a*-i-e*-g;n[2]=a*j+f*-g+e*-h-c*-i;return n;};quat4.toMat3=function(a,h){if(!h){h=mat3.create();}var i=a[0],g=a[1],f=a[2],j=a[3];var n=i+i;var b=g+g;var k=f+f;var e=i*n;var d=i*b;var c=i*k;var m=g*b;var l=g*k;var q=f*k;var r=j*n;var p=j*b;var o=j*k;h[0]=1-(m+q);h[1]=d-o;h[2]=c+p;h[3]=d+o;h[4]=1-(e+q);h[5]=l-r;h[6]=c-p;h[7]=l+r;h[8]=1-(e+m);return h;};quat4.toMat4=function(a,h){if(!h){h=mat4.create();}var i=a[0],g=a[1],f=a[2],j=a[3];var n=i+i;var b=g+g;var k=f+f;var e=i*n;var d=i*b;var c=i*k;var m=g*b;var l=g*k;var q=f*k;var r=j*n;var p=j*b;var o=j*k;h[0]=1-(m+q);h[1]=d-o;h[2]=c+p;h[3]=0;h[4]=d+o;h[5]=1-(e+q);h[6]=l-r;h[7]=0;h[8]=c-p;h[9]=l+r;h[10]=1-(e+m);h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h;};quat4.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]";};